# SimpleApp 실행 가이드

## 시스템 요구사항
- Python 3.8 이상
- pip (Python 패키지 관리자)

## 설치 및 실행 방법

1. 가상환경 생성 및 활성화
```bash
python -m venv venv
# Windows의 경우
venv\Scripts\activate
# macOS/Linux의 경우
source venv/bin/activate
```

2. 필요한 패키지 설치
```bash
pip install django
```

3. 데이터베이스 마이그레이션
```bash
cd SimpleApp
python manage.py migrate
```

4. 관리자 계정 생성 (선택사항)
```bash
python manage.py createsuperuser
```

5. 개발 서버 실행
```bash
python manage.py runserver
```

서버가 실행되면 브라우저에서 다음 주소로 접속할 수 있습니다:
- 메인 페이지: http://127.0.0.1:8000
- 관리자 페이지: http://127.0.0.1:8000/admin

## 주요 기능
- 스케줄러: 일정 관리 및 상태 추적
- 채팅: 실시간 메시지 교환

# SimpleApp API 문서

## API 개요
이 문서는 SimpleApp의 API 엔드포인트들에 대한 상세한 설명을 제공합니다. SimpleApp은 크게 스케줄러 API와 메시지 채팅 API로 구성되어 있으며, RESTful 원칙을 따르고 있습니다.

## 보안 고려사항 및 구현

### 1. 인증 및 권한 관리
- **세션 기반 인증**
  - Django의 기본 세션 인증 시스템 사용
  - 세션 ID는 서버 측에서 안전하게 저장
  - 세션 타임아웃: 30분 후 자동 로그아웃
  - 세션 하이재킹 방지를 위한 보안 쿠키 사용

- **권한 관리**
  - 사용자별 권한 레벨 구현
  - 관리자(Admin) 권한
  - 일반 사용자(User) 권한
  - 게스트(Guest) 권한

### 2. 데이터 보안
- **저장 데이터(Data at Rest) 보안**
  - 비밀번호 해싱: Django의 PBKDF2 알고리즘 사용
  - 중요 정보 암호화: AES-256 암호화 적용
  - 데이터베이스 백업 암호화

- **전송 데이터(Data in Transit) 보안**
  - HTTPS/TLS 1.3 프로토콜 사용
  - 강력한 암호화 스위트 적용
  - 인증서 피닝(Certificate Pinning) 구현

### 3. 입력 데이터 검증
- **XSS(Cross-Site Scripting) 방지**
  - 모든 사용자 입력 데이터 이스케이프 처리
  - Content Security Policy (CSP) 헤더 설정
  - HTML 태그 및 스크립트 필터링

- **SQL 인젝션 방지**
  - Django ORM의 파라미터화된 쿼리 사용
  - 사용자 입력의 직접적인 SQL 쿼리 실행 방지
  - 데이터베이스 접근 권한 최소화

### 4. CSRF(Cross-Site Request Forgery) 보호
- Django의 CSRF 토큰 시스템 활성화
- 모든 POST 요청에 CSRF 토큰 검증
- Same-Origin 정책 적용

### 5. 레이트 리미팅(Rate Limiting)
- API 요청 제한 구현
  - 인증된 사용자: 분당 100회
  - 비인증 사용자: 분당 30회
- IP 기반 요청 제한
- 과도한 요청 시 일시적 차단

### 6. 로깅 및 모니터링
- **보안 로깅**
  - 모든 인증 시도 기록
  - 비정상적인 접근 패턴 감지
  - 중요 데이터 접근 로그

- **실시간 모니터링**
  - 비정상 행위 탐지
  - 자동화된 보안 알림
  - 정기적인 보안 감사

### 7. 에러 처리
- 상세 에러 정보 숨김
- 사용자에게 최소한의 에러 정보만 제공
- 디버그 모드 비활성화

## API 인증 시스템
- 스케줄러 API: Django의 세션 기반 인증을 사용합니다. 모든 요청에는 로그인이 필요합니다.
- 채팅 API: 별도의 인증 없이 사용 가능하며, 채팅방 이름으로 구분됩니다.

## 스케줄러 API (Scheduler API)

### 1. 스케줄 목록 조회
- **엔드포인트**: `/`
- **메소드**: GET
- **설명**: 사용자의 모든 스케줄을 날짜와 시간순으로 정렬하여 보여줍니다.
- **인증**: 로그인 필수
- **응답**: HTML 형식의 스케줄 목록 페이지
- **사용 예시**:
  ```
  GET http://127.0.0.1:8000/scheduler/
  ```

### 2. 스케줄 생성
- **엔드포인트**: `/create/`
- **메소드**: POST
- **설명**: 새로운 일정을 생성합니다. 제목, 설명, 날짜, 시간 정보가 필요합니다.
- **인증**: 로그인 필수
- **요청 본문**:
  ```json
  {
    "title": "미팅 일정",
    "description": "팀 회의",
    "date": "2024-01-21",
    "time": "14:30"
  }
  ```
- **응답**: 성공 시 스케줄 목록 페이지로 리다이렉트

### 3. 스케줄 수정
- **엔드포인트**: `/edit/<int:pk>/`
- **메소드**: POST
- **설명**: 기존 스케줄의 정보를 수정합니다. pk는 스케줄의 고유 식별자입니다.
- **인증**: 로그인 필수
- **요청 본문**:
  ```json
  {
    "title": "수정된 미팅 일정",
    "description": "수정된 팀 회의",
    "date": "2024-01-22",
    "time": "15:30",
    "status": "completed"
  }
  ```
- **상태 옵션**:
  - pending: 대기 중
  - completed: 완료됨
  - cancelled: 취소됨

### 4. 스케줄 삭제
- **엔드포인트**: `/delete/<int:pk>/`
- **메소드**: POST
- **설명**: 특정 스케줄을 삭제합니다. 삭제 후 복구할 수 없습니다.
- **인증**: 로그인 필수
- **응답**: 성공 시 스케줄 목록 페이지로 리다이렉트

### 5. 스케줄 상태 토글
- **엔드포인트**: `/toggle-status/<int:pk>/`
- **메소드**: GET
- **설명**: 스케줄의 상태를 대기중(pending)과 완료(completed) 사이에서 전환합니다.
- **인증**: 로그인 필수
- **응답**: 스케줄 목록 페이지로 리다이렉트

## 메시지 채팅 API (Message Chat API)

### 1. 채팅방 접속
- **엔드포인트**: `/chat/`
- **메소드**: GET
- **설명**: 기본 채팅방 페이지에 접속합니다.
- **인증**: 불필요
- **응답**: 채팅방 HTML 페이지
- **사용 예시**:
  ```
  GET http://127.0.0.1:8000/chat/
  ```

### 2. 특정 채팅방 접속
- **엔드포인트**: `/chat/<str:room_name>/`
- **메소드**: GET
- **설명**: 지정된 이름의 채팅방에 접속합니다. 채팅방이 없는 경우 자동 생성됩니다.
- **매개변수**:
  - room_name: 채팅방 이름 (문자열)
- **응답**: 채팅방 HTML 페이지

### 3. 메시지 전송
- **엔드포인트**: `/send-message/`
- **메소드**: POST
- **설명**: 특정 채팅방에 메시지를 전송합니다.
- **요청 본문**:
  ```json
  {
    "message": "안녕하세요!",
    "room_name": "general"
  }
  ```
- **응답**: JSON 형식의 성공/실패 상태

### 4. 전체 메시지 조회
- **엔드포인트**: `/get-messages/`
- **메소드**: GET
- **설명**: 시스템의 모든 채팅 메시지를 조회합니다.
- **응답**: JSON 형식의 메시지 목록

### 5. 특정 채팅방 메시지 조회
- **엔드포인트**: `/get-messages/<str:room_name>/`
- **메소드**: GET
- **설명**: 특정 채팅방의 메시지 기록만 조회합니다.
- **매개변수**:
  - room_name: 채팅방 이름
- **응답**: JSON 형식의 해당 채팅방 메시지 목록

## 에러 처리

### 공통 에러 응답
- **인증 실패**: 401 Unauthorized
  ```json
  {
    "error": "인증이 필요합니다."
  }
  ```
- **권한 없음**: 403 Forbidden
  ```json
  {
    "error": "해당 작업에 대한 권한이 없습니다."
  }
  ```
- **리소스 없음**: 404 Not Found
  ```json
  {
    "error": "요청한 리소스를 찾을 수 없습니다."
  }
  ```

### 스케줄러 API 에러
- 스케줄러 API는 에러 발생 시 에러 메시지와 함께 해당 페이지로 리다이렉트됩니다.
- 유효성 검사 실패 시 폼 에러 메시지가 표시됩니다.

### 채팅 API 에러
- 채팅 API는 에러 발생 시 JSON 형식으로 에러 상태와 메시지를 반환합니다.
- 메시지 전송 실패 시 적절한 에러 메시지가 클라이언트에 전달됩니다.
